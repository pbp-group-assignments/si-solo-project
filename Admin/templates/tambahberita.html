{% extends 'base.html' %}

{% block meta %}
<title>Login</title>
{% endblock meta %}

{% block content %}
<!-- <div class="p-3 mb-2 bg-info text-white">ToDoList App</div> -->
<div class = "login">

    <!-- <h1>Tambah Baru</h1> -->

    <form method="POST" action="">
        {% csrf_token %}
        <div class="mx-auto card align-items-center  mt-5 w-50" >
            
            <div class="card-body">
                <h2 class="card-title"> <center>Tambah Baru</center></h2>
                <table>
                    <tr>
                        
                        <td>News Title: </td>
                        <td><input type="text" name="news_title" placeholder="news_title" class="form-control"></td>
                    </tr>
                            
                    <tr>
                        <td>News Highlight: </td>
                        <td><textarea name="news_highlight" placeholder="news_highlight" class="form-control"></textarea></td>
                    </tr>

                    <tr>
                        
                        <td>News Date: </td>
                        <td><input type="text" name="news_date" placeholder="news_date" class="form-control"></td>
                    </tr>
                            
                    <tr>
                        <td>Link Image: </td>
                        <td><textarea name="image" placeholder="image" class="form-control"></textarea></td>
                    </tr>
        
                    <tr>
                        <td></td>
                        <td><input class="btn btn-light" type="submit" value="Tambah" ></td>
                    </tr>
                </table>
                    

            </div>
        </div>
        
    </form>
    <div class="row" id="taskCards"></div>
        
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
            <script>
                $(document).ready(function () {
                    showTask();
                });
        
                document.getElementById("button").onclick = addTodo
        
                //  POST
                function addTodo() {
                    fetch("{% url 'Admin:tambah_berita' %}", {
                        method: "POST",
                        body: new FormData(document.querySelector('#form'))
                    }).then(showTask)
                    return false
                }
        
                // get
                function showTask() {
                    let htmlString = "";
                    $.ajax({
                        url: "json",
                        type: "GET",
                        dataType: "json",
                        success: function (data) {
                            data.forEach(task => {
                                var response = ""
                  
                                htmlString += `
                                `
                            
                            ;
                                $('#taskCards').html(htmlString);
                            })
                        }, error: function (data) {
                            console.log("error");
                        }
                    })
                };
            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
                crossorigin="anonymous"></script>
            
</div>

{% endblock content %}